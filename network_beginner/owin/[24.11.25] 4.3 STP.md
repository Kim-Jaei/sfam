# 24년 11월 25일

# 4장 스위치: 2계층 장비

## 4.3 STP(Spanning Tree Protocol)

- 용어

  SPoF - 하나의 시스템이나 구성 요소에서 고장이 발생했을 때 전체 시스템의 작동이 멈추는 요소


<aside>
💡

1. 다음은 네트워크의 루프와 브로드캐스트 스톰에 대한 설명이다, 가장 **틀린**것을 고르시오.
    1. 루프란 네트워크에 연결된 모양이 고리처럼 되돌아오는 형태로 구성된 상황을 말하며, 이런 상황이 발생했을 때는 네트워크가 마비되고 통신이 안되게 된다.
    2. 루프 구조로 네트워크가 연결된 상태에서 브로드캐스트를 발생시키면 스위치가 해당 패킷이 유입된 포트를 제외한 모든 포트에 플러딩을 하고, 플러딩된 패킷은 다시 패킷이 유입된 포트를 제외한 모든 포트로 플러딩을 반복하는데 이를 브로드캐스트 스톰이라고 한다.
    3. 2계층 헤더는 TTL(Time to Live)이라는 패킷 수명을 갖고 있지만 3계층 헤더에는 이러한 라이프타임 메커니즘이 없어 루프가 발생하면 패킷이 죽지 않고 계속 살아남아 전체 네트워크 대역폭을 차지하여 네트워크를 마비시킨다.
    4. 브로드캐스트 스톰이 발생하면 네트워크에 접속된 단말의 속도와 네트워크 접속 속도가 느려지고 네트워크에 설치된 스위치에 모든 LED들이 동시에 빠른 속도로 깜빡이게된다.
- 정답

  **c**

  **3계층의 헤더에 TTL이라는 패킷 수명이 존재하고 2계층에는 이러한 라이프타임 메커니즘이 없다.**


1. 다음 설명에 해당하는 단어로 알맞은 것은?

---

- 네트워크에서 동일한 MAC 주소가 지속적으로 다른 포트 간에 이동하는 현상을 말한다.
- 스위치 MAC 주소가 여러 포트에서 학습되면 반복갱신되어 정상적으로 동작하지 않는다.
- 보통 스위치에서 발생하며, 네트워크 성능 저하나 연결 문제를 초래할 수 있다.

---

1. SPoF(Single Point of Failure: 단일 장애점)
2. TTL(Time to Live)
3. 브로드캐스트 스톰
4. MAC 어드레스 플래핑
- 정답

  **d**


1. 다음 STP에 대한 설명 중 가장 **틀린**것은?
    1. STP는 루프를 확인하고 적절히 포트를 사용하지 못하게 만들어 루프를 예방한다.
    2. 루프를 예방하기 위해서는 전체 스위치가 어떻게 연결되는지 알아야 하고 이를 위해 스위치 간에 정보를 전달하는 방법이 필요한데 스위치는 BPDU라는 프로토콜을 통해 스위치 간에 정보를 전달하여 전체 네트워크 트리를 만들어 루프 구간을 확인한다.
    3. BPDU에는 스위치의 ID와 같은 고유값을 가지고 있어 이러한 정보를 스위치 간에 서로 교환하며 루프를 파악한다.
    4. 차단 상태에서 트래픽이 흐를 때 까지 스위치 포트의 상태로는 Blockig, Listening, Running, Forwarding 4가지가 있다.
- 정답

  **d**

  **Blocking - 패킷 데이터를 차단한 상태로 상대방의 BPDU를 기다리는 상태**

  **Listening - 해당 포트가 전송 상태로 변경되는 것을 결정하고 준비하는 상태**

  **Learning - 이미 해당 포트를 포워딩하기로 결정하고 실제 패킷 포워딩이 일어날 때 스위치가 곧바로 동작하는 상태**

  **Forwarding - 패킷을 포워딩하여 정상적인 통신이 가능한 상태**


1. 다음 STP 동작 방식에 대한 설명 중 **틀린**설명을 모두 고른것은?

---

1. 전체 네트워크에서 하나의 루트 스위치를 선정한다.
2. 자신을 전체 네트워크의 대표 스위치로 적은 BPDU를 옆 스위치로 전달한다.
3. 루트가 아닌 스위치 중 하나의 루트 포트를 선정한다.
4. 하나의 세그먼트에 하나의 지정포트를 선정한다.
5. 스위치 간의 연결에서 이미 루트 포트로 선정된 경우, 반대쪽이 지정 포트로 선정되어 양쪽 모두 차단 상태가 된다.
6. 스위치 간의 연결에서 아무도 루트 포트가 아닐 경우, 한쪽은 지정포트로 선정되고 다른 한 쪽은 대체 포트가 되어 포워딩 상태가 된다.

---

       **1.  a , b                 2.  c , d                    3.  e , f                       4.  a , f**

- 정답

  **3. e , f**

  **e. 스위치 간의 연결에서 이미 루트 포트로 선정된 경우, 반대쪽이 지정 포트로 선정되어 양쪽 모두 포워딩 상태가 된다.**

  **f. 스위치 간 연결에서 아무도 루트 포트가 아니라면 한쪽은 지정포트, 다른쪽은 대체 포트가 되는데 대체 포트는 포워딩 상태가 아닌 차단 상태가 되어 루프를 방지한다.**


1. 다음 향상된 STP(RSTP, MST)에 대한 설명 중 **틀린**것은?
    1. RSTP는 STP의 백업 경로 활성화에 걸리는 시간을 단축 시키기 위해 개발되었고 기본적인 구성과 동작 방식은 STP와 같지만 BPDU 메시지 형식이 다양하다.
    2. STP는 토폴로지가 변경되면 말단에서 루트까지 변경 보고를 보내고 받은 루트에서 연산 후 다시 말단으로 보내면서 정보를 확정하는 시간이 오래 걸리지만 RSTP는 토폴로지 변경이 일어난 스위치 자신이 모든 토폴로지 변경을 직접 전파할 수 있어 비교적 빠른 시간 내에 토폴로지 변경을 감지, 복구할 수 있다.
    3. CST(일반 스패닝 트리 프로토콜)에서는 VLAN의 개수와 상관없이 스패닝 트리가 한개만 동작하여 비효율적인 경로로 통신하게 되는데 이를 보완하기 위해 PVST가 개발되었고, PVST는 VLAN마다 별도의 스패닝 트리를 유지해야 하여 부담이 커진다는 단점을 개선하기 위해 MST가 개발되었다.
    4. 스패닝 트리 프로토콜은 루프 예방에 필수적인 메커니즘이지만 스위치에 부담이 많은 프로토콜이고 포트가 차단되거나 늦게 포워딩되어 불편하여 현재는 사용하고 있지 않다.
- 정답

  **d**

  **스패닝 트리 프로토콜은 스위치에 부담이 많이가고 포트가 차단되거나 늦게 포워딩되어 풀편한 프로토콜이지만 여전히 현재의 네트워크에서 중요한 프로토콜이며, RSTP나 MST 같은 최신 버전들은 보다 빠르고 효율적인 동작을 제공한다.**

</aside>