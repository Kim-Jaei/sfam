## 5장 라우터/L3 스위치: 3계층 장비
## 5.3 라우팅 설정 방법

- 용어

<aside>
💡

1. 다음중 외부 네트워크와 통신할 수 **있는** 경우를 고르시오.
    1. 목적지가 외부 네트워크이면서 다이렉트 커넥티드 라우팅 테이블 정보만 있는 경우
    2. 다이렉트 커넥티드 외에 스태틱 라우팅에서 원격지 네트워크 라우팅 정보를 얻은 경우
    3. 서브넷 마스크를 정상 범위보다 크게 설정한 경우
    4. 서브넷 마스크를 정상 범위보다 작게 설정한 경우
- 정답

  **b**
  **외부 네트워크로 통신하려면 다이렉트 커넥티드 외에 스태틱 라우팅이나 다이나믹 라우팅에서 얻은 원격지 네트워크에 대한 적절한 라우팅 정보가 있어야 한다.**


1. 다음 설명에 해당하는 단어로 **알맞은** 것은?

---

- 다이렉트 커넥티드를 제외하고 라우팅 우선순위가 가장 높다.
- 네트워크 정보를 쉽게 추가하고 경로를 직접 제어할 수 있다.
- 목적지 주소의 서브넷 마스크가 모두 0이다.

---

1. 다이렉트 커넥티드
2. 스태틱 라우팅
3. 다이나믹 라우팅
4. 디폴트 라우팅
- 정답

  **d**

  **디폴트 라우팅은 스태틱 라우팅 기반이면서 목적지 주소의 서브넷 마스크가 모두 0이라는 특징이 있기 때문에 기본적인 스태틱 라우팅의 특징도 가지고 있다.**


1. 다음 유니캐스트 라우팅 프로토콜을 분류별로 묶은 것 중 **알맞은** 것은?
    1. 역할에 따른 분류 - IGP, BGP
    2. 역할에 따른 분류 - EGP, IGP
    3. 동작 원리에 따른 분류 - IGP, EGP
    4. 동작 원리에 따른 분류 - RIP, EGP, IGRP, EIGRP
- 정답

  **b**

  **역할에 따른 분류 - IGP(AS 내에서 사용하는 라우팅 프로토콜)**

                             **EGP(AS 간 통신에 사용하는 라우팅 프로토콜)**

  **동작 원리에 따른 분류 - 디스턴스 벡터(인접한 라우터에서 경로 정보를 습득하는**

                                            **라우팅 프로토콜 ex) RIP, BGP)**                  
    
                                      **링크 스테이트(라우터에 연결된 링크 상태를 서로 교환하고 각**
    
                                 **네트워크 맵을 그리는 라우팅 프로토콜 ex) OSPF, IS-IS)**


1. 다이나믹 라우팅에 대한 설명중 **틀린**것은?
    1. 라우터끼리 정보를 교환해 관리자의 직접적인 개입 없이 경로 정보를 최신으로 유지할 수 있다.
    2. 다이나믹 라우팅 프로토콜은 유니캐스트 라우팅과 멀티캐스트 라우팅으로 분류되고 유니캐스트 라우팅은 역할과 동작원리에 따라 분류할 수 있다.
    3. 동작 원리에 따라 디스턴스 벡터와 링크 스테이트로 분류할 수 있고 링크 스테이트 방식에는 OSPF와 IS-IS 등이 있다.
    4. OSPF에서는 AREA간이나 외부 네트워크와의 연결을 위해 특별한 라우터를 이용해야 하는데 AREA 간의 연결을 위해 ASBR을 사용하고 OSPF와 외부의 정보를 연결을 위해 ABR을 사용한다.
- 정답

  **d**

  **OSPF에서는 CPU와 메모리 자원의 부하를 방지하기 위해 AREA단위로 네트워크를 구분하고 그 안에서만 링크 상태 정보를 공유한다. 따라서 다른 AREA나 외부와 정보를 공유하기 위해서는 특별한 라우터가 필요한데 AREA간의 공유를 위한 ABR(Area Border Router)과 외부 정보를 연결해주는 ASBR(Area System Border Router)이 있다.**

</aside>

# 6장 로드 밸런서/방화벽: 4계층 장비(세션 장비)

## 6.1 4계층 장비의 특징

## 6.2 로드 밸런서

<aside>
💡

1. 다음중 세션 장비에 대해 고려해야 할 사항으로 옳지 **않은**것을 고르시오.
    1. 세션 테이블 기반으로 운영되며 라이프 타임이 존재한다.
    2. Inbound와 Outbound 경로가 일치해야 한다.
    3. 로드 밸런서의 경우 IP 주소가 변경되며 확장된 L7 로드 밸런서(ADC)는 애플리케이션 프로토콜 정보도 변경된다.
    4. 세션 장비가 포함되는 4계층 장비는 2계층 네트워크 장비처럼 설계, 운용하면 여러가지 문제가 발생하기 때문에 3계층 네트워크 장비처럼 설계 운용하여야한다.
- 정답

  **d**
  **4계층 프로토콜 장비를 2,3계층 네트워크 장비처럼 설계,운용하게 되면 트래픽 처리 방식의 차이나 세션 상태 추적 문제로 인해 네트워크 성능 저하가 유발되게 된다.**

    - 직피티

      ### 1. **트래픽 처리 방식의 차이**

        - **2계층 장비**는 주로 MAC 주소와 같은 데이터 링크 계층 정보에 따라 트래픽을 전달합니다. 이 장비는 주로 브리지나 스위치로, IP 주소나 애플리케이션 계층 정보를 고려하지 않고, 패킷을 목적지 MAC 주소로 전달합니다.
        - **3계층 장비**는 라우터처럼 IP 주소를 기준으로 트래픽을 처리하며, 네트워크 간 라우팅을 담당합니다. 이를 통해 IP 주소를 기반으로 트래픽을 포워딩합니다.

      4계층 장비(예: 로드 밸런서)는 **TCP/UDP 세션 정보**를 기반으로 트래픽을 처리하며, 애플리케이션 계층에서 세션의 상태를 관리하고, 적절한 서버로 요청을 분배합니다. 4계층 장비는 2계층이나 3계층 장비처럼 설계되면, **세션 관리 및 트래픽 상태 추적**이 제대로 이루어지지 않습니다.

      ### 2. **세션 상태 추적 문제**

        - 4계층 장비는 연결 상태를 추적하고 세션 정보를 관리해야 합니다. 예를 들어, TCP 연결 상태(세션 상태)를 기반으로 트래픽을 전달하거나 분배합니다.
        - 2계층(스위치) 또는 3계층(라우터) 장비처럼 설계되면, 이 장비들은 세션 정보를 추적할 수 없으며, 연결을 관리하지 못합니다. 이는 **세션 지속성 유지**나 **세션 상태 관리**에 문제가 발생할 수 있습니다. 결과적으로 연결이 끊어지거나, 잘못된 서버로 트래픽이 전송될 수 있습니다.

      ### 3. **부하 분산 실패**

        - 4계층 장비는 **부하 분산**을 위해 세션 기반으로 트래픽을 분배합니다. 예를 들어, 클라이언트가 요청을 보내면, 4계층 장비는 해당 클라이언트의 세션을 기억하고 동일한 서버로 요청을 보낼 수 있도록 합니다.
        - 만약 2계층 장비처럼 설계하면 세션을 추적할 수 없고, 각 요청을 독립적으로 처리하여 부하 분산을 실패하게 됩니다. 이로 인해 특정 서버로 부하가 집중되거나, 세션 상태를 유지하지 못해 비효율적인 처리가 발생할 수 있습니다.

      ### 4. **애플리케이션 프로토콜 처리 문제**

        - 4계층 장비는 애플리케이션 프로토콜을 고려한 로드 밸런싱을 지원할 수 있으며, **L7 로드 밸런서**와 같이 HTTP, HTTPS, FTP와 같은 애플리케이션 프로토콜을 처리할 수 있습니다. 2계층 장비는 이러한 처리를 할 수 없습니다.
        - 3계층 장비는 IP 주소와 라우팅만 고려하므로, 애플리케이션 계층에서의 세부적인 처리가 필요할 때 문제가 발생합니다. 예를 들어, HTTP 요청을 기반으로 한 세션 유지나, 특정 요청을 처리하는 서버를 선택하는 작업이 불가능합니다.

      ### 5. **네트워크 성능 저하**

        - 4계층 장비는 세션 상태와 연결을 추적하면서 **트래픽을 최적화**하고 **성능을 높이는 역할**을 합니다. 만약 이를 2계층이나 3계층처럼 설계하면, 세션 추적이 이루어지지 않거나 네트워크 성능이 저하될 수 있습니다.
        - 특히 **세션 지속성**이나 **로드 밸런싱**이 제대로 이루어지지 않으면, 트래픽이 원활하게 분배되지 않아 네트워크 성능에 악영향을 미칠 수 있습니다.

      ### 결론:

      4계층 장비를 2계층 또는 3계층 네트워크 장비처럼 설계하고 운용하면, **세션 관리, 부하 분산, 애플리케이션 프로토콜 처리** 등에 문제가 발생하고, **네트워크 성능 저하**와 **세션 유지 실패** 같은 다양한 문제가 발생할 수 있습니다. 이러한 문제를 피하려면 4계층 장비는 해당 계층의 역할에 맞는 방식으로 설계하고 운용해야 합니다.


1. 다음 로드 밸런서에 대한 설명중 **틀린**것은?
    1. 서버나 장비의 부하를 분산하기 위해 사용하는 장비를 로드 밸런서라고 부른다.
    2. 가장 많이 쓰이는 분야는 웹 서버의 부하 분산이다.
    3. 사용자 천 명의 요청을 동시에 처리해 주는 서버와 사용자 5천 명의 요청을 동시에 처리해 주는 서버의 가격차이는 5배가 아니라 훨씬 비싸기 때문에 작은 장비를 여러대 묶어 사용하는 방식을 선호하는데 이를 스케일 아웃이라고 한다.
    4. AWS의 ALB는 L4 로드 밸런싱, NLB는 L7로드 밸런싱용 전용 컴포넌트이다.
- 정답

  **d**

  **ALB는 L7 로드 밸런싱, NLB는 L4로드 밸런싱용 전용 컴포넌트이다.**


1. ADC의 기능으로 **올바른것**은 총 몇개인가?

---

1. 페일오버(Failover, 장애극복 기능)
2. 리다이렉션(Readirection)
3. 캐싱(Caching)
4. 압축(Compression)
5. 콘텐츠 변환 및 재작성
6. 인코딩 변환
7. 애플리케이션 프로토콜 최적화
8. WAF(Web Application Firewall)
9. HTML, XML 검증과 변환

---

1. 3개
2. 6개
3. 8개
4. 모두
- 정답

  **4**

  **모두 ADC의 기능이다.**


1. 스케일 업과 스케일 아웃을 장단점을 비교한 것으로 **올바르지 않은것**은?
    1. 스케일 업은 비용이 기하급수적으로 증가한다는 단점이 있다.
    2. 스케일 아웃은 비교적 적은 비용으로 시스템 확장이 가능하다는 장점이 있다.
    3. 스케일 아웃은 스케일 업에 비해 시스템 설계 변경 없이 서비스 사용량을 쉽게 늘릴 수 있다.
    4. 시스템 축소 방식도 확장방식과 비슷한데 스케일 인은 여러대의 서버를 묶어 축소하는 방식이고 스케일 다운은 더 작은 용량의 시스템으로 서비스를 옮기는 방식이다.
- 정답

  **c**

  **시스템 설계 변경 없이 서비스 사용량을 쉽게 늘릴 수 있는 장점은 스케일 업에 대한 설명이고 스케일 아웃은 여러 대의 서버나 인스턴스를 관리하고, 이들 간의 부하 분산이나 데이터 일관성을 유지해야 하기 때문에 더 복잡한 아키텍처와 관리가 필요하고 그 과정에서 설계 변경이나 시스템 아키텍처 변경이 필요할 수 있다.**


</aside>

## 6.3 방화벽

<aside>
💡

1. 방화벽은 NAT(Network Address Translation) 동작 방식과 유사하게 세션 정보를 장비 내부에 저장하고 패킷이 들어오거나 나갈 때 저장했던 세션 정보를 먼저 참조해 들어오는 패킷이 외부에서 처음 시작된 것인지, 내부 사용자가 외부로 요청한 응답인지 가려낸다. (      )
- 정답

  **o**
  **방화벽은 상태 기반 검사(Stateful Inspection)를 통해 세션 정보를 저장하고, 패킷이 들어오거나 나갈 때 세션 정보를 참조하여 트래픽이 정상적인 응답인지 확인한다.**


1. 인터넷과 같은 불특정 다수와 통신해야할 때는 정책의 복잡도가 많이 증가하므로 인터넷 방화벽에서의 기본 정책은 나가는 모든 패킷을 허용하고 내부로 들어오는 모든 패킷을 차단한다. (        )
- 정답

  **o**
  **인터넷 방화벽 정책**


</aside>

민주: https://docs.google.com/forms/d/e/1FAIpQLSfcSIeUNSL8dIofa4lRvMwMp1-qI_pZ0S20llIfRAdV2utadQ/viewscore?viewscore=AE0zAgAWUmiTfckn6g5-jE82BrfqPvpCX1uPx2umKzFKxG7J34lWtqvM2UnO-9sDH1Dw1aY