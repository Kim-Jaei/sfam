# 5장 라우터/L3 스위치: 3계층 장비

## 5.1 라우터의 동작 방식과 역할

- 용어

<aside>
💡

1. 다음은 라우터가 목적지 경로를 얻는 방법중 가장 **틀린**것을 고르시오.
    1. IP 주소를 입력하면서 자연스럽게 인접 네트워크 정보를 얻는다.
    2. 관리자가 직접 경로 정보를 입력한다.
    3. 라우터는 목적지 IP 주소만 알고 있으면 경로를 자동으로 계산하여 패킷을 전송한다.
    4. 라우터끼리 서로 경로 정보를 자동으로 교환한다.
- 정답

  **c**
  **라우터가 목적지 IP 주소를 알고 있다고 해서 경로를 자동으로 계산하고 패킷을 전송하는 것은 아니고 라우터는 경로 계산을 위해 라우팅 테이블을 참조하여야 한다.**


1. 다음 설명에 해당하는 단어로 알맞은 것은?

---

- 서로 다른 통신 프로토콜을 사용하는 시스템 간에 데이터를 교환할 수 있도록 해주는 기술
- 이를 통해 라우터는 다양한 네트워크 환경을 연결하고, 데이터가 각기 다른 프로토콜을 사용하는 네트워크를 통과할 수 있게 합니다.
- LAN 기술이 WAN 기술로 변환되는 것을 예로 들 수 있다.

---

1. 경로 지정
2. 프로토콜 변환
3. 브로드캐스트 스톰
4. 브로드캐스트 컨트롤
- 정답

  **b**

  **라우터는 들어오는 패킷의 2계층 헤더를 벗겨내고 3계층 주소를 확인한 후 새로운 2계층 헤더 정보를 만들어 외부로 보내기 때문에 이를 통해 프로토콜 변환을 수행할 수 있다.**


</aside>

## 5.2 경로 지정 - 라우팅/스위칭

- 용어

  홉 바이 홉 라우팅, 토폴로지 테이블(원시)


<aside>
💡

1. 다음은 라우터와 경로 지정에 대한 설명중 가장 **틀린**것을 고르시오.
    1. 라우터는 자신이 분명히 알고 있는 주소가 아닌 목적지를 가진 패킷이 들어오면 해당 패킷을 버린다.
    2. 라우터는 다양하고 많은 경로 정보를 얻을 수 있지만 원하는 목적지 정보와 정확히 일치하지 않는 경우가 더 많다.
    3. 라우터는 복잡하고 많은 경로 정보를 얻어 최적의 경로 정보인 라우팅 테이블을 가진다.
    4. 라우터는 서브넷 단위로 라우팅 정보를 습득하고 라우팅 정보를 최적화하기 위해 서머리 작업을 통해 확실한 하나의 서브넷 정보만을 전달한다.
- 정답

  **d**

  **라우터는 서머리 작업을 통해 확실한 하나의 서브넷 정보만을 전달하는 것이 아니라 여러개의 서브넷 정보를 뭉쳐서 전달한다. (질문!)**


1. 라우터에서 넥스트 홉을 지정할 때는 일반적으로 라우터의 나가는 인터페이스를 지정하는 방법을 사용하고, 상대방의 MAC 주소를 알 필요가 없거나 정확한 IP주소를 모르더라도 상대방의 MAC 주소를 알 수 있을 때 상대방 라우터의 인터페이스 IP 주소를 지정하는 방법을 사용한다. (    )
- 정답

  **X**

  **라우터에서 넥스트 홉을 지정할 때** **일반적으로 상대방 라우터의 인터페이스 IP 주소를 지정하는 방법을 사용하고 상대방의 MAC 주소를 알 필요가 없거나 정확한 IP주소를 모르더라도 상대방의 MAC 주소를 알 수 있을 때 라우터의 나가는 인터페이스를 지정하는 방법을 사용한다.**


1. 다음 라우팅에 대한 설명 중 가장 **틀린**것은?
    1. 라우팅은 라우터가 경로 정보를 얻는 방법이다.
    2. 다이렉트 커넥티드로 얻은 정보는 강제로 지울 수 없고 해당 네트워크 설정을 삭제하거나 해당 네트워크 인터페이스가 비활성화되어야만 자동으로 사라진다.
    3. 관리자가 직접 목적지 네트워크와 넥스트 홉을 라우터에 저장해 경로 정보를 입력하는것을 다이나믹 라우팅이라고 한다.
    4. 스태틱 라우팅은 라우터 너머의 라우터의 상태 정보는 파악할 수 없어 라우터 사이에 회선이나 라우터에 장애가 발생하면 대체 경로로 패킷을 보낼 수 없다는 단점이있다.
- 정답

  **c**

  **해당 설명은 스태틱 라우팅에 대한 설명이고, 다이나미 라우팅은 스태틱 라우팅의 단점을 보완하여 라우터끼리 자신이 알고 있는 경로 정보나 링크 상태 정보를 교환해 전체 네트워크를 학습하여 경로 정보를 얻는 방식을 말한다.**


1. 다음 스위칭에 대한 설명 중 **틀린**설명을 모두 고른것은?

---

1. 스위칭은 라우팅 테이블을 참조하여 외부 라우터에 최적의 경로로 패킷을 포워딩하는 작업이다.
2. 라우팅 테이블에서 가장 좋은 항목을 찾는 알고리즘을 롱기스트 프리픽스 매치라고 한다.
3. 정확한 정보를 매치하는 이그잭트 매치에 비해 롱기스트 매치처럼 부정확한 정보중 가장 비슷한 경로를 찾는 작업은 더 많은 리소스를 차지한다.
4. 위와 같은 리소스 부하를 줄이기 위해 캐시에 정보를 저장하고 캐시를 먼저 확인하여 스위칭 시간을 줄이고 리소스의 부하를 줄일 수 있는데 이는 메모리 캐시를 이용해 데이터베이스 부하를 줄이는 레디스(Redis)와 비슷하다.
5. 토폴로지 테이블에서 라우팅 테이블을 선정하기 위한 우선순위를 정할때 정보를 얻은 소스에 따라 가중치를 정하는데 3가지 경로 수집 방법을 우선순위가 높은 순서대로 나열하면 다이나믹 라우팅 > 스테틱 라우팅 > 다이렉트 커넥티드 순이고 이를 AD(Administrative Distance, 관리 거리) 라고 부른다.
6. 라우팅과 스위칭 역할을 하나로 묶어 전체적으로 우선순위가 높은 순서대로 나열하면 롱기스트 매치 > AD(관리 거리) > 부하 분산(ECMP) > 코스트 순으로 나열할 수 있다.

---

       **1.  a , b                 2.  c , d                    3.  e , f                       4.  a , f**

- 정답

  **3. e , f**

  **e. AD (Administrative Distance, 관리 거리)는 라우팅 프로토콜의 우선순위를 정하는 값으로 다이렉트 커넥티드는 스테틱 라우팅보다 더 높은 우선순위를 가지기 때문에 우선순위가 높은 순서대로 나열하면 다이렉트 커넥티드 > 스테틱 라우팅 > 다이나믹 라우팅이어야 한다.**

  **f. 우선순위가 높은 순서대로 나열하면 롱기스트 매치 > AD(관리 거리) > 코스트 > 부하 분산(ECMP) 순서이다.**


</aside>

민주: https://docs.google.com/forms/d/e/1FAIpQLScY9aBVWZJUBcCrqK7JGJ4vDieMNdW-f5sjPKzHEtIb-9oXZg/viewscore?viewscore=AE0zAgBvOamm3iC_gf-H5DSOHXvTv6w_t9Hu5MHtF34sYnD01PzvDARlAJREALfMorvo-Yw

재이: https://docs.google.com/forms/d/e/1FAIpQLScsut_OJsRAJeCKjc9Xg-jl4otxJVFfajqsafwrtU9iZ_Ybrg/viewscore?viewscore=AE0zAgB8o_uj1JIfgLLXQ8BuHPcOPp4f34vIZjBfdGvXihbjvE93HzVzpi8BKOlocMqhN4Q

<aside>
💡

Q1. **여러개를 뭉쳐서 전달하는게 뭉쳐서 요약 하나를 전달하나요 아님 여러개를 그냥 준다는 말인가요?**

1. 예를 들어 아래와 같은 3가지 서브넷을 알고 있다고 가정했을때
- 192.168.1.0/24
- 192.168.2.0/24
- 192.168.3.0/24

이것들의 공통인 192.168.0.0/22로 묶어 정보를 테이블로 전달한다는 의미로 단편적으로 봤을땐 뭉쳐서 요약 하나를 전달한다고 봐야 할 것 같습니다. 그러나 공통된 서브넷 정보가 많을 것이므로 최종적으론 요약된 여러개가 나오게 될거고 이를 전달한다고 보면 될 것 같습니다.

</aside>